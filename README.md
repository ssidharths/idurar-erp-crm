<div align="center">
    <a href="https://www.idurarapp.com/">
  <img src="https://avatars.githubusercontent.com/u/50052356?s=200&v=4" width="128px" />
    </a>
    <h1>Open Source ERP / CRM Accounting Invoice Quote</h1>
    <p align="center">
        <p>IDURAR ERP CRM | Simple To Use</p>
    </p>
    

```
 Give a Star â­ï¸ & Fork to this project ... Happy coding! ğŸ¤©`
```

IDURAR is Open Source ERP / CRM (Invoice / Quote / Accounting ) Based on Advanced Mern Stack (Node.js / Express.js / MongoDb / React.js ) with Ant Design (AntD) and Redux

</div>

**ğŸš€ Self-hosted Entreprise Version** : [https://cloud.idurarapp.com](https://cloud.idurarapp.com)



## Features :

Invoice Management

Payment Management

Quote Management

Customer Management

Ant Design Framework(AntD) ğŸœ

Based on Mern Stack (Node.js / Express.js / MongoDb / React.js ) ğŸ‘¨â€ğŸ’»

### May i can use IDURAR for Commercial use :

- Yes You can use IDURAR for free for personal or Commercial use.

## Our Sponsors

  <a href="https://m.do.co/c/4ead8370b905?ref=idurarapp.com">
    <img src="https://opensource.nyc3.cdn.digitaloceanspaces.com/attribution/assets/PoweredByDO/DO_Powered_by_Badge_blue.svg" width="201px">
  </a>

#

<img width="1403" alt="Open Source ERP CRM" src="https://github.com/idurar/idurar-erp-crm/assets/136928179/a6712286-7ca6-4822-8902-fb7523533ee8">

## Free Open Source ERP / CRM App

IDURAR is Open "Fair-Code" Source ERP / CRM (Invoice / Inventory / Accounting / HR) Based on Mern Stack (Node.js / Express.js / MongoDb / React.js ) with Ant Design (AntD) and Redux


## Getting started

1.[Clone the repository](INSTALLATION-INSTRUCTIONS.md#step-1-clone-the-repository)

2.[Create Your MongoDB Account and Database Cluster](INSTALLATION-INSTRUCTIONS.md#Step-2-Create-Your-MongoDB-Account-and-Database-Cluster)

3.[Edit the Environment File](INSTALLATION-INSTRUCTIONS.md#Step-3-Edit-the-Environment-File)

4.[Update MongoDB URI](INSTALLATION-INSTRUCTIONS.md#Step-4-Update-MongoDB-URI)

5.[Install Backend Dependencies](INSTALLATION-INSTRUCTIONS.md#Step-5-Install-Backend-Dependencies)

6.[Run Setup Script](INSTALLATION-INSTRUCTIONS.md#Step-6-Run-Setup-Script)

7.[Run the Backend Server](INSTALLATION-INSTRUCTIONS.md#Step-7-Run-the-Backend-Server)

8.[Install Frontend Dependencies](INSTALLATION-INSTRUCTIONS.md#Step-8-Install-Frontend-Dependencies)

9.[Run the Frontend Server](INSTALLATION-INSTRUCTIONS.md#Step-9-Run-the-Frontend-Server)

## Contributing

1.[How to contribute](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#how-to-contribute)

2.[Reporting issues](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#reporting-issues)

3.[Working on issues ](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#working-on-issues)

4.[Submitting pull requests](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#submitting-pull-requests)

5.[Commit Guidelines](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#commit-guidelines)

6.[Coding Guidelines](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#coding-guidelines)

7.[Questions](https://github.com/idurar/idurar-erp-crm/blob/master/CONTRIBUTING.md#questions)




# ğŸš€ DevOps Assignment: Complete AWS Infrastructure with AI Integration  

[![CI/CD Pipeline](https://github.com/ssidharths/devops-assignment/actions/workflows/ci-cd.yml/badge.svg)](https://github.com/ssidharths/devops-assignment/actions) 
[![Security Scan](https://img.shields.io/badge/Security-Gemini%20AI-blue)](https://ai.google.dev/gemini-api) 
[![Infrastructure](https://img.shields.io/badge/Infrastructure-Terraform-purple)](https://terraform.io) 
[![Container](https://img.shields.io/badge/Container-Docker%20%2B%20EKS-orange)](https://kubernetes.io)


A comprehensive DevOps solution demonstrating enterprise-grade AWS infrastructure with AI-powered security scanning, complete CI/CD automation, and ChatOps integration.   

## ğŸ“‹ Table of Contents

- [Architecture Overview](#-architecture-overview)
- [Features](#-features)
- [Quick Start](#-quick-start)
- [Infrastructure Components](#-infrastructure-components)
- [CI/CD Pipeline](#-cicd-pipeline)
- [Monitoring & Alerting](#-monitoring--alerting)
- [Security & Compliance](#-security--compliance)
- [Cost Optimization](#-cost-optimization)
- [ChatOps Integration](#-chatops-integration)
- [Usage Guide](#-usage-guide)
- [Troubleshooting](#-troubleshooting)
- [Contributing](#-contributing)   

## ğŸ— Architecture Overview

This project implements a production-ready, highly available infrastructure on AWS with the following key components:

- **Multi-AZ VPC** with public/private subnets
- **EKS Kubernetes cluster** with auto-scaling node groups  
- **RDS PostgreSQL** with Multi-AZ failover
- **ElastiCache Redis** cluster
- **Complete CI/CD pipeline** with GitHub Actions
- **AI-powered security scanning** with Google Gemini
- **Comprehensive monitoring** with CloudWatch and custom dashboards
- **ChatOps integration** for Slack-based infrastructure management   

![Architecture Diagram](architecture-diagram.mmd)   

## âœ¨ Features

### ğŸ”§ Infrastructure as Code
- **Modular Terraform** architecture with reusable modules
- **Multi-environment** support (dev, staging, prod)
- **State management** with S3 backend and DynamoDB locking
- **Encryption everywhere** using AWS KMS   


### ğŸš€ CI/CD Automation
- **Automated testing** with Jest and ESLint
- **Docker multi-stage builds** for optimized images
- **Zero-downtime deployments** using Helm rolling updates
- **Terraform validation** and security scanning
- **Automated rollback** capabilities   

### ğŸ›¡ï¸ Security & Compliance
- **AWS GuardDuty** for threat detection
- **AWS Config** rules for compliance monitoring
- **Google Gemini AI** for security code analysis
- **Automated remediation** for security violations
- **Secrets management** with SSM Parameter Store   

### ğŸ“Š Observability
- **Custom CloudWatch dashboards** with 15+ metrics
- **Intelligent alerting** with SNS notifications
- **Centralized logging** with PII filtering
- **Application performance monitoring**
- **Infrastructure health checks**   

### ğŸ’¬ ChatOps
- **Slack integration** for infrastructure queries
- **AI-powered responses** using Gemini
- **Real-time notifications** for incidents
- **Interactive troubleshooting**   

## ğŸš€ Quick Start
### Prerequisites

- AWS CLI configured with appropriate permissions
- Terraform >= 1.6.0
- Docker Desktop
- Node.js >= 18
- kubectl
- Helm >= 3.12
- GitHub CLI & Gemini API (optional)   

### 1. Clone and Setup

**Clone the repository**
```bash
git clone https://github.com/ssidharths/idurar-erp-crm
```   
- Checkout to the required branch - branch `infra` has the entire DevOps modules currently.


- `terraform` modules could be found at `terraform/`   

- `ci-cd` and other **scripts** are inside `assignment-part-2/`   

**Set up environment variable**
```
cp terraform/terraform.tfvars.example terraform/terraform.tfvars
```   
- Edit terraform.tfvars with your values   

**Install application dependencies**
```
cd assignment-part-2
cd app && npm install && cd ..
```   
### 2. Configure GitHub Secrets
```
gh secret set AWS_ACCESS_KEY_ID --body "YOUR_AWS_ACCESS_KEY"
gh secret set AWS_SECRET_ACCESS_KEY --body "YOUR_AWS_SECRET_KEY"
gh secret set AWS_ACCOUNT_ID --body "123456789012"

```
OPTIONAL
```
gh secret set GEMINI_API_KEY --body "your-gemini-api-key"
gh secret set SLACK_WEBHOOK_URL --body "your-slack-webhook-url"

```   

### 3. Deploy Infrastructure   
Initialize and deploy infrastructure   
```
cd terraform/
terraform init
terraform plan
terraform apply

```   
Note: Initial deployment takes ~15-30 minutes   

### 4. Verify deployment  

Check EKS cluster status   
```
aws eks update-kubeconfig --region us-east-1 --name devops-assignment-cluster
kubectl get nodes

```   
Check application deployment   
```
kubectl get pods
kubectl get services

```

Test application endpoint   
```
curl http://your-load-balancer-url/health
```

## ğŸ— Infrastructure Components   

### Networking
- **VPC**: 10.0.0.0/16 with DNS hostnames enabled
- **Public Subnets**: 2 subnets across AZs for load balancers
- **Private Subnets**: 2 subnets for applications and databases
- **NAT Gateways**: High availability internet access for private subnets
- **Route Tables**: Optimized routing configuration   

### Compute
- **EKS Cluster**: Kubernetes v1.28 with RBAC enabled
- **Node Group 1**: General purpose nodes (t3.medium, 2-4 nodes)
- **Node Group 2**: Spot instances for cost optimization
- **Auto Scaling**: CPU and memory-based scaling policies
- **Container Insights**: Enhanced monitoring enabled   

### Storage & Databases
- **RDS PostgreSQL**: db.t3.micro with Multi-AZ deployment
- **ElastiCache Redis**: 2-node cluster with failover
- **S3 Buckets**: Assets, Terraform state, and logs storage
- **ECR Repository**: Container image storage with vulnerability scanning   

### Security
- **IAM Roles**: Least-privilege access policies
- **Security Groups**: Layer-specific network controls
- **KMS Encryption**: All data encrypted at rest
- **GuardDuty**: Threat detection with ML-powered analysis
- **Config Rules**: 5 compliance rules for security monitoring   

## ğŸ”„ CI/CD Pipeline

The GitHub Actions pipeline includes 7 jobs with comprehensive automation:

### Pipeline Stages   

1. **ğŸ§ª Test & Lint**
   - ESLint code quality checks
   - Jest unit tests with coverage
   - Version generation for artifacts

2. **ğŸ—ï¸ Terraform Validation**
   - Format checking and validation
   - Security policy verification
   - Infrastructure planning

3. **ğŸ”’ Security Scan (Gemini)**
   - AI-powered code analysis
   - Security misconfiguration detection
   - Automated security reporting

4. **ğŸ³ Build & Push**
   - Multi-stage Docker builds
   - ECR image scanning
   - Vulnerability assessment

5. **ğŸš€ Deploy Infrastructure**
   - Terraform apply with approval gates
   - Infrastructure health verification
   - Output artifacts generation

6. **ğŸš¢ Deploy to EKS**
   - Helm-based application deployment
   - Rolling updates with zero downtime
   - Health checks and validation

7. **ğŸ“¢ Notifications**
   - Slack notifications for status
   - Email alerts for failures
   - Deployment confirmations

### Pipeline Triggers

- **Pull Requests**: Full pipeline with approval gates
- **Main Branch**: Automatic production deployment
- **Manual**: Triggered via GitHub Actions UI

## ğŸ“Š Monitoring & Alerting

### CloudWatch Dashboard
Access the comprehensive dashboard: [CloudWatch Console](https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards)

**Key Metrics Monitored:**
- Application response time and error rates
- EKS cluster resource utilization
- RDS performance and connections
- Redis cache hit rates and memory usage
- Infrastructure health indicators   

### Alerting Rules

**Critical Alerts (< 5 min response):**
- CPU utilization > 80% for 10+ minutes
- Application error rate > 5% for 5+ minutes
- Database connection failures
- Security violations detected

**Warning Alerts (< 30 min response):**
- High memory utilization (> 75%)
- Disk space low (< 20% free)
- Unusual network traffic patterns
- Cost threshold breaches   

### Log Management

- **Centralized Logging**: All application and infrastructure logs in CloudWatch
- **PII Filtering**: Automated removal of sensitive data using Lambda
- **Structured Logging**: JSON format for improved searchability
- **Log Retention**: 30-day retention with automated archival

## ğŸ›¡ï¸ Security & Compliance   

### Threat Detection

**AWS GuardDuty Integration:**
- Malware protection for EC2 and containers
- S3 data access monitoring
- Kubernetes audit log analysis
- Network traffic anomaly detection
- Automated threat response workflows

### Compliance Monitoring

**AWS Config Rules:**  
1. **Security Group Compliance**: No unrestricted SSH access (0.0.0.0/0:22)   
2. **Encryption Compliance**: All S3 buckets encrypted at rest   
3. **Database Security**: RDS instances must use encryption    
4. **Network Security**: Restricted access to common ports   
5. **Access Management**: Root access key usage monitoring   

### Security Automation

**Automated Remediation:**
- Quarantine compromised instances
- Revoke suspicious IAM sessions  
- Block malicious IP addresses
- Update security group rules
- Generate incident reports

## ğŸ’° Cost Optimization

### Current Cost Analysis

| Service Category | Monthly Cost | Optimization Opportunity |
|-----------------|--------------|-------------------------|
| EKS Cluster | $75 | Spot instances (-50%) |
| RDS Database | $25 | Reserved Instance (-40%) |
| ElastiCache | $20 | Right-sizing (-25%) |
| Data Transfer | $15 | VPC Endpoints (-60%) |
| **Total** | **$135** | **Potential: $85 (-37%)** |


### Optimization Recommendations

#### 1. Reserved Instances (Immediate)
- **RDS**: 1-year term saves $120/year
- **ElastiCache**: 1-year term saves $96/year
- **ROI**: 6-month payback period

#### 2. S3 Lifecycle Policies

```
{
"Rules": [
{
"Status": "Enabled",
"Transitions": [
{"Days": 30, "StorageClass": "STANDARD_IA"},
{"Days": 90, "StorageClass": "GLACIER"}
]
}
]
}
```
### Cost Monitoring

- **Daily cost reports** via email
- **Budget alerts** at 80% and 100% thresholds
- **Resource tagging** for cost allocation
- **Monthly optimization reviews**


## ğŸ’¬ ChatOps Integration

### Slack Commands

The ChatOps Lambda responds to natural language queries:

**Infrastructure status**  
"What's the current status of our infrastructure?"   

**Resource information**  
"List all public subnets"   
"Show me the EKS cluster details"   

**Performance monitoring**   
"Are there any active alarms?"   
"What's the database performance like?"   

**Security insights**   
"Any recent security findings?"   
"Show compliance status"   

### Setup Instructions   

1. **Create Slack App**   
Go to https://api.slack.com/apps   
Create new app and get webhook URL

2.  **Configure Webhook**   
Add to GitHub Secrets   
```
gh secret set SLACK_WEBHOOK_URL --body "https://hooks.slack.com/services/..."
```

3. **Test ChatOps**
Trigger test via Lambda console or SNS   
```
aws lambda invoke --function-name devops-assignment-chatops-test
--payload '{"question":"What is our infrastructure status?"}'
response.json
```   

## ğŸ“– Usage Guide   
### Daily Operations

**Check Infrastructure Health:**   

**View dashboard**   
Open https://console.aws.amazon.com/cloudwatch/home#dashboards   

**Check cluster status**   
```
kubectl get nodes -o wide
kubectl top nodes
kubectl get pods --all-namespaces
```

**Deploy Application Updates:**   

**Push to feature branch triggers PR pipeline**

```
git checkout -b feature/new-feature
git push origin feature/new-feature
```   

**Merge to main triggers production deployment**

```
git checkout main
git merge feature/new-feature
git push origin main
```

**Monitor Application:**   

**View logs**
```
kubectl logs -f deployment/hello-app-hello-app

```   

**Check metrics**
```
kubectl top pods
kubectl get hpa
```

### Troubleshooting Common Issues

**Pod Crashes:**   

**Check pod status and logs**   
```
kubectl describe pod <pod-name>
kubectl logs <pod-name> --previous
```

**Check resource limits**
```
kubectl top pod <pod-name>
```

**Database Connection Issues:**   

**Test connectivity from pod**   
```
kubectl exec -it <pod-name> -- nslookup <rds-endpoint>
```

**Check security groups**   
```
aws ec2 describe-security-groups --group-ids <sg-id>
```   

**Pipeline Failures**   

**Check GitHub Actions logs**   
```
gh run list --limit 5
gh run view <run-id>
```   

**Validate Terraform locally**   

```
terraform plan -detailed-exitcode
```   
## ğŸ”§ Development   
### Local Development Setup   

**Start local application**   
```
cd app/
npm install
npm run start
```
**Run tests**   
```
npm test
npm run init
```

**Build Docker image locally**   

```
docker build -t hello-app .
docker run -p 3000:3000 hello-app
```   

**Validate Terraform**   
```
terraform fmt -check -recursive
terraform validate
```   

### Adding New Features
1. Create feature branch
2. Update application code
3. Add/update tests
4. Update infrastructure if needed
5. Update documentation
6. Submit pull request


## ğŸ†˜ Troubleshooting   

### Common Issues   


**Terraform State Lock:**   

*Release state lock (use carefully)*
```
terraform force-unlock <lock-id>
```

**Update kubeconfig**
```
aws eks update-kubeconfig --region us-east-1 --name devops-assignment-cluster
```   
**Checking IAM permissions**

```
aws sts get-caller-identity
```  

**Application Not Accessible:**

Check load balancer   
```
kubectl get ingress
kubectl get services
```

Verify health checks
```
curl -I http://<lb-url>/health
```

### Getting Help

- ğŸ“– [AWS EKS Documentation](https://docs.aws.amazon.com/eks/)
- ğŸ“– [Terraform AWS Provider](https://registry.terraform.io/providers/hashicorp/aws/)
- ğŸ“– [Kubernetes Documentation](https://kubernetes.io/docs/)   

\
*Last updated: September 18, 2025*


## Show your support

Dont forget to give a â­ï¸ to this project ... Happy coding!

**ğŸš€ Self-hosted Entreprise Version** : [https://cloud.idurarapp.com](https://cloud.idurarapp.com)

## License

IDURAR is Free Open Source Released under the GNU Affero General Public License v3.0.
#   U p d a t e d   0 9 / 1 9 / 2 0 2 5   0 1 : 0 4 : 3 4  
 #   U p d a t e d   0 9 / 1 9 / 2 0 2 5   0 1 : 0 6 : 4 6  
 